{"code":"!function(t){var n={};function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&\"object\"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&n&&\"string\"!=typeof t)for(var o in t)e.d(i,o,function(n){return t[n]}.bind(null,o));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,\"a\",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p=\"/\",e(e.s=1)}([function(t,n){t.exports=self.AFAppX},function(t,n,e){t.exports=e(2)},function(t,n,e){\"use strict\";function i(){e(6),e(7),e(8),e(9),e(10),e(11),e(12),e(13),e(14),e(15),e(16)}e(3),e(5),self.bootstrapApp?self.bootstrapApp({success:i}):i()},function(t,n,e){\"use strict\";(function(t){var n=\"undefined\"!==typeof t?t:self;n.appXRuntimeConfig={},n.appXAppJson={app:{$homepage:\"page/kownledge/index\"}}}).call(this,e(4))},function(t,n){var e;e=function(){return this}();try{e=e||Function(\"return this\")()||(0,eval)(\"this\")}catch(t){\"object\"===typeof window&&(e=window)}t.exports=e},function(t,n,e){\"use strict\";importScripts(\"https://appx/af-appx.worker.min.js\")},function(t,n,e){\"use strict\";var i=e(0);i.bridge,i.bridge;(0,i.App)({globalData:{userInfo:{id:\"\",name:\"\",position:\"\",avatar:\"\"},host:\"http://yangfan.vaiwan.com/\",corpId:\"\"},onLaunch:function(t){t.query,this.globalData.corpId=t.query.corpId},onShow:function(t){}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/grid/index\",usingComponents:{}},o({data:{bottomIndex:0},props:{columnNum:3,circular:!1,list:[],onGridItemClick:function(){},hasLine:!0},didMount:function(){var t=this.props,n=t.list,e=t.columnNum,i=n.length/e;this.setData({bottomIndex:Math.floor(i)===i?(i-1)*e:Math.floor(i)*e})},methods:{onGridItemClick:function(t){this.props.onGridItemClick({detail:{index:t.target.dataset.index}})}}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/search-bar/index\",usingComponents:{}},o({props:{className:\"\",placeholder:\"\",focus:!1},data:{_value:\"\",focus:!1},didMount:function(){this.setData({_value:this.props.hasOwnProperty(\"value\")?this.props.value:\"\",focus:this.props.focus})},didUpdate:function(){this.props.hasOwnProperty(\"value\")&&this.props.value!==this.data._value&&this.setData({_value:this.props.value})},methods:{handleInput:function(t){var n=t.detail.value;this.props.hasOwnProperty(\"value\")||this.setData({_value:n}),this.props.onInput&&this.props.onInput(n)},handleClear:function(){this.setData({focus:!0}),this.props.hasOwnProperty(\"value\")||this.setData({_value:\"\"}),this.doClear()},doClear:function(){this.props.onClear&&this.props.onClear(\"\"),this.props.onChange&&this.props.onChange(\"\")},handleFocus:function(){this.setData({focus:!0}),this.props.onFocus&&this.props.onFocus()},handleBlur:function(){this.setData({focus:!1}),this.props.onBlur&&this.props.onBlur()},handleCancel:function(){this.props.hasOwnProperty(\"value\")||this.setData({_value:\"\"}),this.props.onCancel?this.props.onCancel():this.doClear()},handleConfirm:function(t){var n=t.detail.value;this.props.onSubmit&&this.props.onSubmit(n)},handleBack:function(t){this.props.onBack&&this.props.onBack()},sacn:function(){dd.scan({type:\"qr\",success:function(t){dd.navigateTo({url:\"/page/kownledge/doc-detial/doc-detial?guid=\"+t.code})},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})}})}}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/card/index\",usingComponents:{}},o({props:{title:\"\",onClick:function(){},info:\"\"},methods:{onCardClick:function(){var t=this.props,n=t.info;(0,t.onClick)({info:n})}}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge),a=i.WorkerComponent||function(){};i.$global.currentComponentConfig={is:\"/mini-ddui/es/tabs/index\",usingComponents:{}},a({props:{className:\"\",tabBarUnderlineColor:\"#3296fa\",tabBarActiveTextColor:\"#3296fa\",tabBarInactiveTextColor:\"#191f25\",tabBarBackgroundColor:\"#ffffff\",showPlus:!1,fixed:!0},data:{scrollInit:0,current:0,windowWidth:0,tabWidth:.25},didMount:function(){var t=this,n=this.props.tabs;o.getSystemInfo({success:function(e){t.setData({windowWidth:e.windowWidth,tabWidth:n.length>3?.25:1/n.length})}})},methods:{handleSwiperChange:function(t){var n=t.detail.current;this.moveScrollBar(n),this.props.onChange&&this.props.onChange({index:n}),this.setData({current:n})},handleTabClick:function(t){var n=t.target.dataset.index;this.moveScrollBar(n),this.props.onTabClick&&this.props.onTabClick({index:n}),this.setData({current:n})},handlePlusClick:function(){this.props.onPlusClick&&this.props.onPlusClick()},moveScrollBar:function(t){var n=this.data,e=n.windowWidth,i=n.tabWidth,o=t*e*i;o=t<=2?0:(t-2)*e*i,this.setData({scrollInit:o})}}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/tabs/tab-content/index\",usingComponents:{}},o({})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/list/index\",usingComponents:{}},o({props:{className:\"\"}})},function(t,n,e){\"use strict\";var i=e(0),o=(i.bridge,i.bridge,i.WorkerComponent||function(){});i.$global.currentComponentConfig={is:\"/mini-ddui/es/list/list-item/index\",usingComponents:{}},o({props:{className:\"\",align:!1,disabled:!1,multipleLine:!1,wrap:!1},methods:{onItemTap:function(t){var n=this.props,e=n.onClick,i=n.disabled;e&&!i&&e({index:t.target.dataset.index})}}})},function(t,n,e){\"use strict\";var i=e(0);i.bridge,i.bridge;i.$global.currentPageConfig={pagePath:\"page/kownledge/index\",usingComponents:{grid:\"/mini-ddui/es/grid/index\",\"search-bar\":\"/mini-ddui/es/search-bar/index\",card:\"/mini-ddui/es/card/index\"}};var o=(0,i.getApp)();(0,i.Page)({data:{userInfo:{id:\"\",name:\"\",position:\"\",avatar:\"\"},gridList:{}},onLoad:function(t){this.loginSys()},loginSys:function(){var t=this;\"\"==o.globalData.userInfo.id?(dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/Employee/GetDingDingUserByCodeAsync\",method:\"Get\",data:{code:\"\"},dataType:\"json\",success:function(n){o.globalData.userInfo=n.data.result,t.setData({userInfo:o.globalData.userInfo}),t.getCategoryList()},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u7528\\u6237\\u4fe1\\u606f\\u5f02\\u5e38\"})},complete:function(t){dd.hideLoading()}})):(this.setData({userInfo:o.globalData.userInfo}),this.getCategoryList())},handleFocus:function(){dd.navigateTo({url:\"/page/kownledge/category-detial/category-detial\"})},onItemClick:function(t){var n=t.detail.index,e=this.data.gridList[n].id;dd.navigateTo({url:\"/page/kownledge/category-detial/category-detial?id=\"+e})},getCategoryList:function(){var t=this;dd.httpRequest({url:o.globalData.host+\"/api/services/app/DocCategory/GetCategoryListAsync\",method:\"Get\",dataType:\"json\",data:{host:o.globalData.host},success:function(n){t.setData({gridList:n.data.result})},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onTitleClick:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})},function(t,n,e){\"use strict\";var i=e(0);i.bridge,i.bridge;i.$global.currentPageConfig={pagePath:\"page/kownledge/category-detial/category-detial\",usingComponents:{card:\"/mini-ddui/es/card/index\",\"search-bar\":\"/mini-ddui/es/search-bar/index\",tabs:\"/mini-ddui/es/tabs/index\",\"tab-content\":\"/mini-ddui/es/tabs/tab-content/index\"}};var o=(0,i.getApp)();(0,i.Page)({data:{id:\"\",input:\"\",docList:{},tabs:{}},onLoad:function(t){t.id&&(this.setData({id:t.id}),this.getTabs())},getSearch:function(){var t=this;dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/DocCategory/GetDocChildListByInputAsync\",method:\"Get\",dataType:\"json\",data:{input:this.data.input},success:function(n){t.setData({docList:n.data.result})},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},getTabs:function(){var t=this;dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/DocCategory/GetTabChildListByIdAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.id},success:function(n){t.setData({tabs:n.data.result}),dd.hideLoading(),t.getDocList(t.data.tabs[0].id)},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},handleTabClick:function(t){var n=t.index,e=this.data.tabs[n].id;this.getDocList(e)},handleSubmit:function(t){null!=t&&0!==t.trim().length&&(this.setData({input:t}),this.getSearch())},handleClear:function(){this.setData({input:\"\"})},getDocList:function(t){var n=this;this.setData({docList:{}}),dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/Document/GetDocListByParentIdAsync\",method:\"Get\",dataType:\"json\",data:{parentId:t},success:function(t){n.setData({docList:t.data.result}),dd.hideLoading()},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},onCardClick:function(t){dd.navigateTo({url:\"./../doc-detial/doc-detial?guid=\"+t.info.id})},onShareAppMessage:function(){}})},function(t,n,e){\"use strict\";var i=e(0);i.bridge,i.bridge;i.$global.currentPageConfig={pagePath:\"page/kownledge/doc-detial/doc-detial\",usingComponents:{grid:\"/mini-ddui/es/grid/index\",card:\"/mini-ddui/es/card/index\",list:\"/mini-ddui/es/list/index\",\"list-item\":\"/mini-ddui/es/list/list-item/index\"}};var o=(0,i.getApp)();(0,i.Page)({data:{id:null,guid:null,docInfo:{},gridList:[{icon:\"/image/annex.png\",text:\"\\u4e0b\\u8f7d\\u9644\\u4ef6\"}]},onLoad:function(t){t.id?(this.setData({id:t.id}),this.getDocInfo()):t.guid&&(this.setData({guid:t.guid}),this.getDocInfoByQrCode())},getDocInfo:function(){var t=this;dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/Document/GetDocInfoAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.id},success:function(n){t.setData({docInfo:n.data.result})},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},getDocInfoByQrCode:function(){var t=this;dd.showLoading(),dd.httpRequest({url:o.globalData.host+\"api/services/app/Document/GetDocInfoByScanAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.guid},success:function(n){t.setData({docInfo:n.data.result})},fail:function(t){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(t){dd.hideLoading()}})},onItemClick:function(t){dd.downloadFile({url:\"http://img.alicdn.com/tfs/TB1x669SXXXXXbdaFXXXXXXXXXX-520-280.jpg\",success:function(t){var n=t.filePath;dd.alert({content:JSON.stringify({filePath:n})}),dd.previewImage({urls:[n]})},fail:function(t){dd.alert({content:t.errorMessage||t.error})}})},onShareAppMessage:function(){}})}]);","extractedComments":[]}
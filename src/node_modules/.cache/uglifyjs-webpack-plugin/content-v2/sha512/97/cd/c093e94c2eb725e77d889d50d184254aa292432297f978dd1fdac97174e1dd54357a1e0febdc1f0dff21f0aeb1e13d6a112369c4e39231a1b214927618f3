{"code":"!function(e){var t={};function a(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"/\",a(a.s=7)}([function(e,t){e.exports=self.AFAppX},function(e,t,a){e.exports=!a(6)(function(){return 7!=Object.defineProperty({},\"a\",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){return\"object\"===typeof e?null!==e:\"function\"===typeof e}},function(e,t){var a=e.exports=\"undefined\"!=typeof window&&window.Math==Math?window:\"undefined\"!=typeof self&&self.Math==Math?self:Function(\"return this\")();\"number\"==typeof __g&&(__g=a)},function(e,t){var a=e.exports={version:\"2.5.7\"};\"number\"==typeof __e&&(__e=a)},function(e,t,a){var n=a(30),i=a(31),r=a(33),o=Object.defineProperty;t.f=a(1)?Object.defineProperty:function(e,t,a){if(n(e),t=r(t,!0),n(a),i)try{return o(e,t,a)}catch(e){}if(\"get\"in a||\"set\"in a)throw TypeError(\"Accessors not supported!\");return\"value\"in a&&(e[t]=a.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,a){e.exports=a(8)},function(module,exports,__webpack_require__){\"use strict\";function success(){__webpack_require__(12),__webpack_require__(13),__webpack_require__(14),__webpack_require__(15),__webpack_require__(16),__webpack_require__(17),__webpack_require__(18),__webpack_require__(19),__webpack_require__(20),__webpack_require__(21),__webpack_require__(36)}!function(){var CircularJSON=JSON;try{CircularJSON=eval('(function(JSON,RegExp){var specialChar=\"~\",safeSpecialChar=\"\\\\\\\\x\"+(\"0\"+specialChar.charCodeAt(0).toString(16)).slice(-2),escapedSafeSpecialChar=\"\\\\\\\\\"+safeSpecialChar,specialCharRG=new RegExp(safeSpecialChar,\"g\"),safeSpecialCharRG=new RegExp(escapedSafeSpecialChar,\"g\"),safeStartWithSpecialCharRG=new RegExp(\"(?:^|([^\\\\\\\\\\\\\\\\]))\"+escapedSafeSpecialChar),indexOf=[].indexOf||function(v){for(var i=this.length;i--&&this[i]!==v;);return i},$String=String;function generateReplacer(value,replacer,resolve){var doNotIgnore=false,inspect=!!replacer,path=[],all=[value],seen=[value],mapp=[resolve?specialChar:\"[Circular]\"],last=value,lvl=1,i,fn;if(inspect){fn=typeof replacer===\"object\"?function(key,value){return key!==\"\"&&replacer.indexOf(key)<0?void 0:value}:replacer}return function(key,value){if(inspect)value=fn.call(this,key,value);if(doNotIgnore){if(last!==this){i=lvl-indexOf.call(all,this)-1;lvl-=i;all.splice(lvl,all.length);path.splice(lvl-1,path.length);last=this}if(typeof value===\"object\"&&value){if(indexOf.call(all,value)<0){all.push(last=value)}lvl=all.length;i=indexOf.call(seen,value);if(i<0){i=seen.push(value)-1;if(resolve){path.push((\"\"+key).replace(specialCharRG,safeSpecialChar));mapp[i]=specialChar+path.join(specialChar)}else{mapp[i]=mapp[0]}}else{value=mapp[i]}}else{if(typeof value===\"string\"&&resolve){value=value.replace(safeSpecialChar,escapedSafeSpecialChar).replace(specialChar,safeSpecialChar)}}}else{doNotIgnore=true}return value}}function retrieveFromPath(current,keys){for(var i=0,length=keys.length;i<length;current=current[keys[i++].replace(safeSpecialCharRG,specialChar)]);return current}function generateReviver(reviver){return function(key,value){var isString=typeof value===\"string\";if(isString&&value.charAt(0)===specialChar){return new $String(value.slice(1))}if(key===\"\")value=regenerate(value,value,{});if(isString)value=value.replace(safeStartWithSpecialCharRG,\"$1\"+specialChar).replace(escapedSafeSpecialChar,safeSpecialChar);return reviver?reviver.call(this,key,value):value}}function regenerateArray(root,current,retrieve){for(var i=0,length=current.length;i<length;i++){current[i]=regenerate(root,current[i],retrieve)}return current}function regenerateObject(root,current,retrieve){for(var key in current){if(current.hasOwnProperty(key)){current[key]=regenerate(root,current[key],retrieve)}}return current}function regenerate(root,current,retrieve){return current instanceof Array?regenerateArray(root,current,retrieve):current instanceof $String?current.length?retrieve.hasOwnProperty(current)?retrieve[current]:retrieve[current]=retrieveFromPath(root,current.split(specialChar)):root:current instanceof Object?regenerateObject(root,current,retrieve):current}var CircularJSON={stringify:function stringify(value,replacer,space,doNotResolve){return CircularJSON.parser.stringify(value,generateReplacer(value,replacer,!doNotResolve),space)},parse:function parse(text,reviver){return CircularJSON.parser.parse(text,generateReviver(reviver))},parser:JSON};return CircularJSON})(JSON,RegExp)')}catch(e){console.error(e)}var OriginFunction=Function,OriginFetch=self.fetch,callInternalAPI=function(e,t){var a={data:{method:e,param:t},action:\"internalAPI\"},n=encodeURIComponent(JSON.stringify(a));if(OriginFetch)OriginFetch(\"https://alipay.kylinBridge/?data=\"+n,{mode:\"no-cors\"}).then(function(){}).catch(function(){});else if(self.AlipayJSBridge)AlipayJSBridge.call(\"internalAPI\",{method:e,param:t});else var i=setInterval(function(){self.AlipayJSBridge&&(AlipayJSBridge.call(\"internalAPI\",{method:e,param:t}),clearInterval(i))},60)},eventHandler=function(e){try{if(e.fromVConsoleToWorker){var t=e.requestId;if(\"exec\"===e.method){try{new OriginFunction(\"requestId\",\"sendBack\",\"\\n              const res = \"+e.script+\";\\n              console.log(res);\\n            \")(t,function(e){return callInternalAPI(\"tinyDebugConsole\",{type:\"msgFromWorkerToVConsole\",content:CircularJSON.stringify({requestId:t,returnValue:e})})})}catch(e){console.error(e.name+\":\"+e.message)}}}}catch(e){}};setTimeout(function(){self.document&&self.document.addEventListener(\"push\",function(e){try{eventHandler(JSON.parse(e.data.param.content))}catch(e){}}),self.addEventListener(\"push\",function(e){try{var t=JSON.parse(JSON.parse(e.data.text()).param.data.content);eventHandler(t)}catch(e){}})},10),[\"log\",\"info\",\"error\",\"debug\",\"warn\"].forEach(function(e){var t=\"o\"+e;console[t]=console[e],console[e]=function(){for(var a,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];(a=console)[t].apply(a,i);var o=void 0;try{o=CircularJSON.stringify(i.map(function(e){return e instanceof Error?e.name+\": \"+e.message:e}))}catch(e){return void console.error(e.name+\": \"+e.message)}callInternalAPI(\"tinyDebugConsole\",{content:o,type:\"console_\"+e})}})}(),__webpack_require__(9),__webpack_require__(11),self.bootstrapApp?self.bootstrapApp({success:success}):success()},function(e,t,a){\"use strict\";(function(e){var t=\"undefined\"!==typeof e?e:self;t.appXRuntimeConfig={},t.appXAppJson={app:{$homepage:\"page/kownledge/index\"}}}).call(this,a(10))},function(e,t){var a;a=function(){return this}();try{a=a||Function(\"return this\")()||(0,eval)(\"this\")}catch(e){\"object\"===typeof window&&(a=window)}e.exports=a},function(e,t,a){\"use strict\";importScripts(\"https://appx/af-appx.worker.min.js\")},function(e,t,a){\"use strict\";var n=a(0);n.bridge,n.bridge;(0,n.App)({globalData:{userInfo:{id:\"\",name:\"\",position:\"\",avatar:\"\"},host:\"http://hechuangdd.vaiwan.com/\",corpId:\"\"},onLaunch:function(e){e.query,this.globalData.corpId=e.query.corpId},onShow:function(e){}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/grid/index\",usingComponents:{}},i({data:{bottomIndex:0},props:{columnNum:3,circular:!1,list:[],onGridItemClick:function(){},hasLine:!0},didMount:function(){var e=this.props,t=e.list,a=e.columnNum,n=t.length/a;this.setData({bottomIndex:Math.floor(n)===n?(n-1)*a:Math.floor(n)*a})},methods:{onGridItemClick:function(e){this.props.onGridItemClick({detail:{index:e.target.dataset.index}})}}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/search-bar/index\",usingComponents:{}},i({props:{className:\"\",placeholder:\"\",focus:!1},data:{_value:\"\",focus:!1},didMount:function(){this.setData({_value:this.props.hasOwnProperty(\"value\")?this.props.value:\"\",focus:this.props.focus})},didUpdate:function(){this.props.hasOwnProperty(\"value\")&&this.props.value!==this.data._value&&this.setData({_value:this.props.value})},methods:{handleInput:function(e){var t=e.detail.value;this.props.hasOwnProperty(\"value\")||this.setData({_value:t}),this.props.onInput&&this.props.onInput(t)},handleClear:function(){this.setData({focus:!0}),this.props.hasOwnProperty(\"value\")||this.setData({_value:\"\"}),this.doClear()},doClear:function(){this.props.onClear&&this.props.onClear(\"\"),this.props.onChange&&this.props.onChange(\"\")},handleFocus:function(){this.setData({focus:!0}),this.props.onFocus&&this.props.onFocus()},handleBlur:function(){this.setData({focus:!1}),this.props.onBlur&&this.props.onBlur()},handleCancel:function(){this.props.hasOwnProperty(\"value\")||this.setData({_value:\"\"}),this.props.onCancel?this.props.onCancel():this.doClear()},handleConfirm:function(e){var t=e.detail.value;this.props.onSubmit&&this.props.onSubmit(t)},handleBack:function(e){this.props.onBack&&this.props.onBack()},scan:function(){dd.scan({type:\"qr\",success:function(e){dd.navigateTo({url:\"/page/kownledge/doc-detial/doc-detial?id=\"+e.code})},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})}})}}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/card/index\",usingComponents:{}},i({props:{title:\"\",onClick:function(){},info:\"\"},methods:{onCardClick:function(){var e=this.props,t=e.info;(0,e.onClick)({info:t})}}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){},r=(n.bridge,n.bridge);n.$global.currentComponentConfig={is:\"/mini-ddui/es/tabs/index\",usingComponents:{}},i({props:{className:\"\",tabBarUnderlineColor:\"#3296fa\",tabBarActiveTextColor:\"#3296fa\",tabBarInactiveTextColor:\"#191f25\",tabBarBackgroundColor:\"#ffffff\",showPlus:!1,fixed:!0},data:{scrollInit:0,current:0,windowWidth:0,tabWidth:.25},didMount:function(){var e=this,t=this.props.tabs;r.getSystemInfo({success:function(a){e.setData({windowWidth:a.windowWidth,tabWidth:t.length>3?.25:1/t.length})}})},methods:{handleSwiperChange:function(e){var t=e.detail.current;this.moveScrollBar(t),this.props.onChange&&this.props.onChange({index:t}),this.setData({current:t})},handleTabClick:function(e){var t=e.target.dataset.index;this.moveScrollBar(t),this.props.onTabClick&&this.props.onTabClick({index:t}),this.setData({current:t})},handlePlusClick:function(){this.props.onPlusClick&&this.props.onPlusClick()},moveScrollBar:function(e){var t=this.data,a=t.windowWidth,n=t.tabWidth,i=e*a*n;i=e<=2?0:(e-2)*a*n,this.setData({scrollInit:i})}}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/tabs/tab-content/index\",usingComponents:{}},i({})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/list/index\",usingComponents:{}},i({props:{className:\"\"}})},function(e,t,a){\"use strict\";var n=a(0),i=n.WorkerComponent||function(){};n.bridge,n.bridge;n.$global.currentComponentConfig={is:\"/mini-ddui/es/list/list-item/index\",usingComponents:{}},i({props:{className:\"\",align:!1,disabled:!1,multipleLine:!1,wrap:!1},methods:{onItemTap:function(e){var t=this.props,a=t.onClick,n=t.disabled;a&&!n&&a({index:e.target.dataset.index})}}})},function(e,t,a){\"use strict\";var n=a(0);n.bridge,n.bridge;n.$global.currentPageConfig={pagePath:\"page/kownledge/index\",usingComponents:{grid:\"/mini-ddui/es/grid/index\",\"search-bar\":\"/mini-ddui/es/search-bar/index\",card:\"/mini-ddui/es/card/index\"}};var i=(0,n.getApp)();(0,n.Page)({data:{userInfo:{id:\"\",name:\"\",position:\"\",avatar:\"\"},gridList:{}},onLoad:function(e){this.loginSys()},loginSys:function(){var e=this;\"\"==i.globalData.userInfo.id?(dd.showLoading(),dd.getAuthCode({success:function(t){dd.httpRequest({url:i.globalData.host+\"api/services/app/Employee/GetDingDingUserByCodeAsync\",method:\"Get\",data:{code:t.authCode,appId:10},dataType:\"json\",success:function(t){i.globalData.userInfo=t.data.result,e.setData({userInfo:i.globalData.userInfo}),e.getCategoryList()},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u7528\\u6237\\u4fe1\\u606f\\u5f02\\u5e38\"+JSON.stringify(e),buttonText:\"\\u786e\\u5b9a\"})},complete:function(e){dd.hideLoading()}})}})):(this.setData({userInfo:i.globalData.userInfo}),this.getCategoryList())},handleFocus:function(){dd.navigateTo({url:\"./category-detial/category-detial\"})},onItemClick:function(e){var t=e.detail.index,a=this.data.gridList[t].id;dd.navigateTo({url:\"./category-detial/category-detial?id=\"+a})},getCategoryList:function(){var e=this;dd.httpRequest({url:i.globalData.host+\"/api/services/app/DocCategory/GetCategoryListAsync\",method:\"Get\",dataType:\"json\",data:{host:i.globalData.host,userId:i.globalData.userInfo.id},success:function(t){e.setData({gridList:t.data.result})},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onTitleClick:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){}})},function(e,t,a){\"use strict\";var n,i,r=a(22),o=(n=r)&&n.__esModule?n:{default:n},s=a(0);s.bridge,s.bridge;s.$global.currentPageConfig={pagePath:\"page/kownledge/category-detial/category-detial\",usingComponents:{card:\"/mini-ddui/es/card/index\",\"search-bar\":\"/mini-ddui/es/search-bar/index\",tabs:\"/mini-ddui/es/tabs/index\",\"tab-content\":\"/mini-ddui/es/tabs/tab-content/index\"}};var c=(0,s.getApp)();(0,s.Page)((i={data:{id:null,input:\"\",docList:[],tabs:{},pageSize:6,pageIndex:1,pageSearchIndex:1,tempTabIndex:0,pullType:\"\",color:\"#3296fa\"},onLoad:function(e){this.setData({docList:[]}),e.id&&(this.setData({id:e.id}),this.getTabs())},getSearch:function(e){var t=this;dd.showLoading(),e||(e=this.data.id),dd.httpRequest({url:c.globalData.host+\"api/services/app/Document/GetDocListByInputAsync\",method:\"Get\",dataType:\"json\",data:{input:this.data.input,catId:e,userId:c.globalData.userInfo.id,pageIndex:this.data.pageSearchIndex,pageSize:this.data.pageSize},success:function(e){e.data.result.length<t.data.pageSize?t.setData({pageSearchIndex:-1}):t.setData({pageSearchIndex:t.data.pageSearchIndex+1});var a=e.data.result,n=t.data.docList;if(a.length>0){for(var i in a)n.push(a[i]);t.setData({docList:n})}},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})},getTabs:function(){var e=this;dd.showLoading(),dd.httpRequest({url:c.globalData.host+\"api/services/app/DocCategory/GetTabChildListByIdAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.id},success:function(t){e.setData({tabs:t.data.result}),dd.hideLoading(),e.getDocList(e.data.tabs[0].id)},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})},handleClear:function(e){this.setData({pullType:\"\"})},handleInput:function(e){this.setData({input:e}),0==e.trim().length?this.setData({pullType:\"\"}):this.setData({pullType:\"search\"})},handleTabClick:function(e){var t=e.index,a=this.data.tabs[t].id;\"search\"==this.data.pullType?this.data.tempTabIndex!=t&&null!=this.data.input&&(this.setData({pageSearchIndex:1}),this.setData({tempTabIndex:t}),this.setData({id:this.data.tabs[this.data.tempTabIndex].id}),this.setData({docList:[]}),this.getSearch(a)):(this.data.tempTabIndex!=t||this.data.tempTabIndex!=t&&-1==this.data.pageIndex)&&(this.setData({pageIndex:1}),this.setData({tempTabIndex:t}),this.setData({docList:[]}),this.getDocList(this.data.tabs[this.data.tempTabIndex].id))},handleSubmit:function(e){\"search\"!=this.data.pullType?(this.setData({docList:[]}),this.setData({pageSearchIndex:1}),this.setData({pullType:\"search\"}),-1!=this.data.pageSearchIndex&&this.getSearch(this.data.tabs[this.data.tempTabIndex].id)):null!=e&&0!=e.trim().length&&(this.setData({docList:[]}),this.setData({pageSearchIndex:1}),this.setData({pullType:\"search\"}),-1!=this.data.pageSearchIndex&&this.getSearch(this.data.tabs[this.data.tempTabIndex].id))}},(0,o.default)(i,\"handleClear\",function(){this.setData({input:\"\"})}),(0,o.default)(i,\"getDocList\",function(e){var t=this;dd.showLoading(),dd.httpRequest({url:c.globalData.host+\"api/services/app/Document/GetDocListByParentIdAsync\",method:\"Get\",dataType:\"json\",data:{categoryCode:e,userId:c.globalData.userInfo.id,pageIndex:this.data.pageIndex,pageSize:this.data.pageSize},success:function(e){e.data.result.length<t.data.pageSize?t.setData({pageIndex:-1}):t.setData({pageIndex:t.data.pageIndex+1});var a=e.data.result,n=t.data.docList;if(a.length>0){for(var i in a)n.push(a[i]);t.setData({docList:n})}dd.hideLoading()},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})}),(0,o.default)(i,\"onCardClick\",function(e){dd.navigateTo({url:\"./../doc-detial/doc-detial?id=\"+e.info.id})}),(0,o.default)(i,\"onShareAppMessage\",function(){}),(0,o.default)(i,\"onReachBottom\",function(){\"search\"!=this.data.pullType?-1!=this.data.pageIndex&&this.getDocList(this.data.tabs[this.data.tempTabIndex].id):\"search\"==this.data.pullType&&-1!=this.data.pageSearchIndex&&this.getSearch()}),(0,o.default)(i,\"onUnload\",function(){dd.redirectTo({url:\"/page/kownledge/index\"})}),i))},function(e,t,a){\"use strict\";t.__esModule=!0;var n,i=a(23),r=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},function(e,t,a){e.exports={default:a(24),__esModule:!0}},function(e,t,a){a(25);var n=a(4).Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},function(e,t,a){var n=a(26);n(n.S+n.F*!a(1),\"Object\",{defineProperty:a(5).f})},function(e,t,a){var n=a(3),i=a(4),r=a(27),o=a(29),s=a(35),c=function(e,t,a){var d,l,u,p=e&c.F,f=e&c.G,h=e&c.S,g=e&c.P,v=e&c.B,m=e&c.W,b=f?i:i[t]||(i[t]={}),y=b.prototype,C=f?n:h?n[t]:(n[t]||{}).prototype;for(d in f&&(a=t),a)(l=!p&&C&&void 0!==C[d])&&s(b,d)||(u=l?C[d]:a[d],b[d]=f&&\"function\"!=typeof C[d]?a[d]:v&&l?r(u,n):m&&C[d]==u?function(e){var t=function(t,a,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,a)}return new e(t,a,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(u):g&&\"function\"==typeof u?r(Function.call,u):u,g&&((b.virtual||(b.virtual={}))[d]=u,e&c.R&&y&&!y[d]&&o(y,d,u)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,a){var n=a(28);e.exports=function(e,t,a){if(n(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,n){return e.call(t,a,n)};case 3:return function(a,n,i){return e.call(t,a,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(\"function\"!=typeof e)throw TypeError(e+\" is not a function!\");return e}},function(e,t,a){var n=a(5),i=a(34);e.exports=a(1)?function(e,t,a){return n.f(e,t,i(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){var n=a(2);e.exports=function(e){if(!n(e))throw TypeError(e+\" is not an object!\");return e}},function(e,t,a){e.exports=!a(1)&&!a(6)(function(){return 7!=Object.defineProperty(a(32)(\"div\"),\"a\",{get:function(){return 7}}).a})},function(e,t,a){var n=a(2),i=a(3).document,r=n(i)&&n(i.createElement);e.exports=function(e){return r?i.createElement(e):{}}},function(e,t,a){var n=a(2);e.exports=function(e,t){if(!n(e))return e;var a,i;if(t&&\"function\"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;if(\"function\"==typeof(a=e.valueOf)&&!n(i=a.call(e)))return i;if(!t&&\"function\"==typeof(a=e.toString)&&!n(i=a.call(e)))return i;throw TypeError(\"Can't convert object to primitive value\")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},function(e,t,a){\"use strict\";var n=a(0);n.bridge,n.bridge;n.$global.currentPageConfig={pagePath:\"page/kownledge/doc-detial/doc-detial\",usingComponents:{grid:\"/mini-ddui/es/grid/index\",card:\"/mini-ddui/es/card/index\",list:\"/mini-ddui/es/list/index\",\"list-item\":\"/mini-ddui/es/list/list-item/index\"}};var i=(0,n.getApp)();(0,n.Page)({data:{id:null,docInfo:{},hasPermission:!1},onLoad:function(e){e.id&&(this.setData({id:e.id}),this.getDocHasPermission())},getDocHasPermission:function(){var e=this;dd.showLoading(),dd.httpRequest({url:i.globalData.host+\"api/services/app/Document/GetHasDocPermissionFromScanAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.id,userId:i.globalData.userInfo.id},success:function(t){dd.hideLoading(),e.setData({hasPermission:t.data.result}),e.data.hasPermission&&e.getDocInfoByQrCode()},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})},getDocInfoByQrCode:function(){var e=this;dd.showLoading(),dd.httpRequest({url:i.globalData.host+\"api/services/app/Document/GetDocInfoByScanAsync\",method:\"Get\",dataType:\"json\",data:{id:this.data.id,host:i.globalData.host,uid:i.globalData.userInfo.id},success:function(t){e.setData({docInfo:t.data.result})},fail:function(e){dd.alert({content:\"\\u83b7\\u53d6\\u6570\\u636e\\u5931\\u8d25\\uff0c\\u8bf7\\u91cd\\u8bd5\"})},complete:function(e){dd.hideLoading()}})},getCurrentFile:function(e){var t=dd.getStorageSync({key:\"doc_user_files\"}).data;if(!t||0==t.length)return null;for(var a in t)if(t[a].id==e)return t[a];return null},setFile:function(e){dd.showLoading();var t=JSON.stringify(e);dd.httpRequest({url:i.globalData.host+\"api/services/app/Document/SaveDocDingTalkAsync\",method:\"Post\",headers:{\"Content-Type\":\"application/json;charset=UTF-8\",Accept:\"application/json\"},data:t,dataType:\"json\",success:function(e){dd.hideLoading();var t=e.data;t.success||dd.alert({content:t.error.message,buttonText:\"\\u786e\\u5b9a\"})},fail:function(e){dd.hideLoading(),dd.alert({content:\"\\u63d0\\u4ea4\\u6570\\u636e\\u5f02\\u5e38\",buttonText:\"\\u786e\\u5b9a\"}),console.info(e)},complete:function(e){dd.hideLoading()}})},onItemClick:function(e){var t=this,a=e.index,n=this.data.docInfo.fileList[a],r=n.fileUrl,o=n.text,s=n.id;n.spaceId?dd.previewFileInDingTalk({corpId:i.globalData.corpId,spaceId:n.spaceId,fileId:n.fileId,fileName:n.fileName,fileSize:n.fileSize,fileType:n.fileType,success:function(e){dd.alert({content:JSON.stringify(e),buttonText:\"\\u786e\\u5b9a\"})},fail:function(e){dd.alert({content:JSON.stringify(e),buttonText:\"\\u786e\\u5b9a\"})}}):dd.saveFileToDingTalk({url:r,name:o,success:function(e){var n={docAttId:s,userId:i.globalData.userInfo.id,spaceId:e.data[0].spaceId,fileId:e.data[0].fileId,fileName:e.data[0].fileName,fileSize:e.data[0].fileSize,fileType:e.data[0].fileType};t.setFile(n),t.data.docInfo.fileList[a].spaceId=e.data[0].spaceId,t.data.docInfo.fileList[a].fileId=e.data[0].fileId,t.data.docInfo.fileList[a].fileName=e.data[0].fileName,t.data.docInfo.fileList[a].fileSize=e.data[0].fileSize,t.data.docInfo.fileList[a].fileType=e.data[0].fileType,dd.previewFileInDingTalk({corpId:i.globalData.corpId,spaceId:e.data[0].spaceId,fileId:e.data[0].fileId,fileName:e.data[0].fileName,fileSize:e.data[0].fileSize,fileType:e.data[0].fileType})}})},onShareAppMessage:function(){}})}]);","extractedComments":[]}